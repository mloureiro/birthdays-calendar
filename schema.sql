DROP TABLE IF EXISTS users;
CREATE TABLE users (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  key CHARACTER(10) NOT NULL UNIQUE,
  email CHARACTER(200) NOT NULL  UNIQUE,
  password CHARACTER(200) NOT NULL,
  birthdate DATE NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('UTC'::TEXT, NOW()) NOT NULL,
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('UTC'::TEXT, NOW()) NOT NULL
);

DROP TABLE IF EXISTS shared_birthdays;
CREATE TABLE shared_birthdays (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  calendar_owner_id BIGINT NOT NULL REFERENCES users(id),
  owner_id BIGINT NOT NULL REFERENCES users(id),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('UTC'::TEXT, NOW()) NOT NULL
);
